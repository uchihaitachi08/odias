<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Pick Verbs – Odia Game</title>
  <!-- Correct canonical for apex -->
  <link rel="canonical" href="https://odias.in/pick-verbs.html" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
<style>
    :root{ --fg:#111; --muted:#666; --border:#e6e6e6; --bg:#fff; --radius:12px; }
    *{ box-sizing:border-box }
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, "Noto Sans", Arial; margin:0; color:var(--fg); background:var(--bg); }
    header{ display:flex; align-items:center; justify-content:space-between; gap:12px; padding:14px 16px; border-bottom:1px solid var(--border); position:sticky; top:0; background:var(--bg); z-index:10; }
    .brand{ font-weight:800; letter-spacing:-.2px; font-size:clamp(18px,3.2vw,22px); }
    nav a{ text-decoration:none; color:var(--fg); margin-right:16px }
    .right{ display:flex; align-items:center; gap:10px; }
    button{ height:40px; padding:0 12px; border-radius:10px; border:1px solid var(--border); background:#f7f7f7; cursor:pointer; font-size:14px }
    .avatar{ width:32px; height:32px; border-radius:50%; object-fit:cover; border:1px solid var(--border); display:none; }
    .who{ color:var(--muted); font-size:14px; }
    .wrap{ max-width:980px; margin:0 auto; padding:18px 16px; }
    .muted { color:#888 }
    @media (prefers-color-scheme: dark){
      :root{ --fg:#eaeaea; --muted:#aaa; --border:#2a2a2a; --bg:#0f0f0f; }
      button { background:#141414; }
      header{ background:#0f0f0f; }
    }
  </style>
</head>
<body>
  <header>
    <div class="brand">Odias</div>
    <nav>
      <a href="index.html">Home</a>
      <a href="pick-verbs.html">Pick Verbs</a>
    </nav>
    <div class="right">
      <img id="avatar" class="avatar" alt="avatar" />
      <span id="whoami" class="who"></span>
      <button id="btn-google" type="button">Sign in with Google</button>
<button id="btn-logout" type="button" style="display:none;">Log out</button>

    </div>
  </header>

  <section class="wrap" id="verb-game">
    <h2 style="margin:0 0 .5rem">Pick the Verbs</h2>
    <div id="vg-status" class="muted" style="margin:.25rem 0 .75rem">Loading…</div>
    <div id="vg-cards" style="display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:10px;"></div>
    <div style="margin-top:12px;display:flex;gap:10px;align-items:center;">
      <button id="vg-next" style="display:none;">Next round</button>
      <span id="vg-score" class="muted"></span>
    </div>
  </section>

  <!-- The game script imports normalize.js itself -->
  <script type="module" src="./pick-verbs.js"></script>

  <!-- Firebase Auth (same config as index.html) -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-app.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-analytics.js";
  import {
    getAuth, GoogleAuthProvider, signInWithPopup, signInWithRedirect,
    onAuthStateChanged, signOut
  } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-auth.js";

  const firebaseConfig = {
    apiKey: "AIzaSyB7hgP59mh5Ny5RJ2r2KUYwfd17HDaBG8E",
    authDomain: "odias-91b87.firebaseapp.com",
    projectId: "odias-91b87",
    storageBucket: "odias-91b87.firebasestorage.app",
    messagingSenderId: "690693947763",
    appId: "1:690693947763:web:a907630766c50e067b4506",
    measurementId: "G-KBYSJY1DRV"
  };

  const app = initializeApp(firebaseConfig);
  try { getAnalytics(app); } catch(_) {}

  const auth = getAuth(app);
  auth.useDeviceLanguage();
  const provider = new GoogleAuthProvider();

  const btnGoogle = document.getElementById('btn-google');
  const btnLogout = document.getElementById('btn-logout');
  const whoami = document.getElementById('whoami');
  const avatar = document.getElementById('avatar');

  btnGoogle?.addEventListener('click', async () => {
    try { await signInWithPopup(auth, provider); }
    catch { await signInWithRedirect(auth, provider); }
  });

  btnLogout?.addEventListener('click', () => signOut(auth));

  onAuthStateChanged(auth, (user) => {
    if (user) {
      const name = user.displayName || user.email || "Signed in";
      whoami.textContent = name;
      if (user.photoURL) { avatar.src = user.photoURL; avatar.style.display = 'inline-block'; }
      else { avatar.style.display = 'none'; }
      btnGoogle.style.display = 'none';
      btnLogout.style.display = 'inline-block';
    } else {
      whoami.textContent = "";
      avatar.style.display = 'none';
      btnGoogle.style.display = 'inline-block';
      btnLogout.style.display = 'none';
    }
  });
</script>

</body>
</html>
